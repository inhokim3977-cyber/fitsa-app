/* ============================================
   BUTTON COMPONENT SYSTEM V2
   Last updated: 2025-10-20
   ============================================ */

/* Design Tokens */
:root {
    /* Brand Colors */
    --primary-green: #1E3D2B;
    --wood-brown: #8B6A4A;
    --gold: #D9B377;
    --ivory: #F5F1EA;
    --text-dark: #222222;
    --white: #FFFFFF;
    
    /* Button Tokens */
    --btn-primary: #1E3D2B;
    --btn-secondary: #8B6A4A;
    --btn-accent: #D9B377;
    --btn-bg: #F5F1EA;
    --btn-text: #222222;
    --btn-danger: #B00020;
    
    /* Button Radius */
    --btn-radius-sm: 8px;
    --btn-radius-md: 10px;
    --btn-radius-lg: 12px;
    
    /* Shadows & Effects */
    --btn-shadow: 0 2px 8px rgba(0,0,0,.08);
    --ring: 0 0 0 2px rgba(217,179,119,.8);
}

/* ============================================
   BASE STYLES
   ============================================ */

* {
    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
}

body {
    background: var(--primary-green);
    min-height: 100vh;
    color: var(--ivory);
}

/* ============================================
   BUTTON COMPONENT SYSTEM
   ============================================ */

/* Base Button */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-weight: 600;
    line-height: 1;
    border: 1px solid transparent;
    cursor: pointer;
    user-select: none;
    white-space: nowrap;
    text-decoration: none;
    transition: background-color .2s, color .2s, box-shadow .2s, border-color .2s;
    box-shadow: var(--btn-shadow);
    outline: none;
}

/* Icon Slots */
.btn i,
.btn svg,
.btn .icon-left,
.btn .icon-right {
    display: inline-flex;
    width: 18px;
    height: 18px;
    flex-shrink: 0;
}

/* ============================================
   BUTTON SIZES
   ============================================ */

.btn-sm {
    height: 36px;
    padding: 0 12px;
    font-size: 14px;
    border-radius: var(--btn-radius-sm);
    min-height: 36px;
}

.btn-md {
    height: 44px;
    padding: 0 16px;
    font-size: 15px;
    border-radius: var(--btn-radius-md);
    min-height: 44px;
}

.btn-lg {
    height: 52px;
    padding: 0 20px;
    font-size: 16px;
    border-radius: var(--btn-radius-lg);
    min-height: 52px;
}

.btn-block {
    width: 100%;
}

/* Icon-only Button */
.btn-icon {
    padding: 0;
}

.btn-icon.btn-sm {
    width: 36px;
}

.btn-icon.btn-md {
    width: 44px;
}

.btn-icon.btn-lg {
    width: 52px;
}

/* ============================================
   BUTTON VARIANTS
   ============================================ */

/* Primary Variant */
.btn-primary {
    background-color: var(--btn-primary);
    color: var(--ivory);
    border-color: var(--btn-primary);
}

.btn-primary:hover:not(:disabled):not(.loading) {
    background-color: var(--btn-accent);
    color: var(--btn-primary);
    border-color: var(--btn-accent);
}

.btn-primary:active:not(:disabled):not(.loading) {
    background-color: #C9A668;
    border-color: #C9A668;
}

.btn-primary:focus-visible:not(:disabled):not(.loading) {
    box-shadow: var(--ring);
}

/* Secondary Variant */
.btn-secondary {
    background-color: var(--btn-secondary);
    color: var(--ivory);
    border-color: var(--btn-secondary);
}

.btn-secondary:hover:not(:disabled):not(.loading) {
    background-color: var(--btn-accent);
    color: var(--btn-primary);
    border-color: var(--btn-accent);
}

.btn-secondary:active:not(:disabled):not(.loading) {
    background-color: #C9A668;
    border-color: #C9A668;
}

.btn-secondary:focus-visible:not(:disabled):not(.loading) {
    box-shadow: var(--ring);
}

/* Outline Variant */
.btn-outline {
    background-color: transparent;
    color: var(--btn-primary);
    border: 2px solid var(--btn-primary);
}

.btn-outline:hover:not(:disabled):not(.loading) {
    background-color: var(--btn-bg);
    color: var(--btn-primary);
    border-color: var(--btn-primary);
}

.btn-outline:active:not(:disabled):not(.loading) {
    background-color: #E5DFD4;
}

.btn-outline:focus-visible:not(:disabled):not(.loading) {
    box-shadow: var(--ring);
}

/* Ghost Variant */
.btn-ghost {
    background-color: transparent;
    color: var(--btn-secondary);
    border-color: transparent;
}

.btn-ghost:hover:not(:disabled):not(.loading) {
    background-color: rgba(0,0,0,.04);
    color: var(--btn-secondary);
}

.btn-ghost:active:not(:disabled):not(.loading) {
    background-color: rgba(0,0,0,.08);
}

.btn-ghost:focus-visible:not(:disabled):not(.loading) {
    box-shadow: var(--ring);
}

/* Danger Variant */
.btn-danger {
    background-color: var(--btn-danger);
    color: #fff;
    border-color: var(--btn-danger);
}

.btn-danger:hover:not(:disabled):not(.loading) {
    background-color: #8B0019;
    border-color: #8B0019;
}

.btn-danger:active:not(:disabled):not(.loading) {
    background-color: #6B0013;
    border-color: #6B0013;
}

.btn-danger:focus-visible:not(:disabled):not(.loading) {
    box-shadow: 0 0 0 2px rgba(176, 0, 32, 0.4);
}

/* Light Variant (보조용) */
.btn-light {
    background-color: var(--btn-bg);
    color: var(--btn-primary);
    border-color: var(--btn-bg);
}

.btn-light:hover:not(:disabled):not(.loading) {
    background-color: #E5DFD4;
    color: var(--btn-primary);
}

.btn-light:active:not(:disabled):not(.loading) {
    background-color: #D9D1C4;
}

.btn-light:focus-visible:not(:disabled):not(.loading) {
    box-shadow: var(--ring);
}

/* ============================================
   BUTTON STATES
   ============================================ */

/* Disabled State */
.btn:disabled,
.btn.disabled {
    opacity: .55;
    cursor: not-allowed;
    pointer-events: none;
}

/* Loading State */
.btn.loading {
    opacity: .55;
    pointer-events: none;
}

/* Busy State (for ARIA) */
.btn[aria-busy="true"] {
    opacity: .55;
    pointer-events: none;
}

/* ============================================
   SPINNER ANIMATION
   ============================================ */

.spinner {
    display: inline-block;
    width: 16px;
    height: 16px;
    border: 2px solid rgba(255,255,255,.6);
    border-top-color: #fff;
    border-radius: 50%;
    animation: spin .9s linear infinite;
    flex-shrink: 0;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Spinner color variations for different button types */
.btn-outline .spinner,
.btn-ghost .spinner,
.btn-light .spinner {
    border-color: rgba(0,0,0,.2);
    border-top-color: var(--btn-primary);
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Button Group - 인접 버튼 라운드 결합 */
.btn-group {
    display: inline-flex;
    overflow: hidden;
    border-radius: var(--btn-radius-md);
}

.btn-group .btn {
    border-radius: 0;
    margin-left: -1px;
}

.btn-group .btn:first-child {
    border-radius: var(--btn-radius-md) 0 0 var(--btn-radius-md);
    margin-left: 0;
}

.btn-group .btn:last-child {
    border-radius: 0 var(--btn-radius-md) var(--btn-radius-md) 0;
}

.btn-group .btn:only-child {
    border-radius: var(--btn-radius-md);
}

/* ============================================
   DROP ZONES & APP SPECIFIC STYLES
   ============================================ */

.drop-zone {
    border: 8px solid var(--wood-brown);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    background: var(--white);
    box-shadow: 
        inset 0 0 0 2px var(--gold),
        inset 0 0 0 4px var(--primary-green),
        0 4px 12px rgba(30, 61, 43, 0.15),
        0 2px 4px rgba(0, 0, 0, 0.1);
    position: relative;
}

.drop-zone::before {
    content: '';
    position: absolute;
    top: -8px;
    left: -8px;
    right: -8px;
    bottom: -8px;
    border: 2px solid var(--primary-green);
    pointer-events: none;
}

.drop-zone:hover {
    border-color: var(--gold);
    background: #FFFEF9;
    transform: scale(1.02);
    box-shadow: 
        inset 0 0 0 2px var(--gold),
        inset 0 0 0 4px var(--wood-brown),
        0 6px 16px rgba(217, 179, 119, 0.3),
        0 3px 6px rgba(0, 0, 0, 0.15);
}

.drop-zone.drag-over {
    border-color: var(--gold);
    background: #FFFCF5;
    transform: scale(1.05);
    box-shadow: 
        inset 0 0 0 2px var(--gold),
        inset 0 0 0 4px var(--wood-brown),
        0 8px 24px rgba(217, 179, 119, 0.4),
        0 4px 8px rgba(0, 0, 0, 0.2);
}

.center-drop {
    width: 340px;
    height: 340px;
    border-radius: 50%;
    position: relative;
}

.center-drop::after {
    content: '';
    position: absolute;
    top: -12px;
    left: -12px;
    right: -12px;
    bottom: -12px;
    border-radius: 50%;
    border: 3px solid var(--primary-green);
    pointer-events: none;
    box-shadow: 0 0 0 1px var(--wood-brown);
}

.item-drop {
    width: 220px;
    height: 220px;
    border-radius: 20px;
    position: absolute;
}

.item-drop.top-cloth {
    top: 50%;
    left: -240px;
    transform: translateY(-50%);
}

.item-drop.bottom-cloth {
    top: 50%;
    right: -240px;
    transform: translateY(-50%);
}

.item-drop.dress {
    top: 100%;
    left: 50%;
    transform: translate(-50%, -110px);
    width: 220px;
    height: 220px;
}

.preview-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.center-drop .preview-image {
    border-radius: 50%;
}

.item-drop .preview-image {
    border-radius: 20px;
}

.floating {
    animation: float 3s ease-in-out infinite;
}

@keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

.glow {
    box-shadow: 0 4px 20px rgba(217, 179, 119, 0.3);
}

/* Cloth type button active state override */
.cloth-type-btn.active.btn-outline {
    background-color: var(--ivory);
    color: var(--primary-green);
    border-color: var(--ivory);
}

.cloth-type-btn.active.btn-primary {
    transform: scale(1.05);
}

.delete-btn {
    position: absolute;
    top: -8px;
    right: -8px;
    width: 32px;
    height: 32px;
    background: var(--primary-green);
    border-radius: 50%;
    display: none;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    box-shadow: 0 2px 8px rgba(30, 61, 43, 0.3);
}

.delete-btn:hover {
    background: var(--gold);
    transform: scale(1.15);
    box-shadow: 0 4px 12px rgba(217, 179, 119, 0.4);
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.fade-in {
    animation: fadeIn 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

.drop-zone:hover .delete-btn.show {
    display: flex;
}

/* Empty State Guide */
.empty-guide {
    background: var(--ivory);
    border: 1px solid rgba(0, 0, 0, 0.08);
    border-radius: 14px;
    padding: 2rem 1.5rem;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.15);
}

.step-icon {
    width: 60px;
    height: 60px;
    background: rgba(30, 61, 43, 0.08);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.step-arrow {
    opacity: 0.6;
}

/* Upload CTA Button */
.upload-cta-btn {
    width: 100%;
    max-width: 360px;
    height: 56px;
    font-size: 1.125rem;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

.micro-copy {
    line-height: 1.4;
}

/* Button Preview Section Styles */
.btn-preview-section {
    background: var(--ivory);
    border-radius: 16px;
    padding: 2rem;
    margin: 3rem auto;
    max-width: 1200px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.btn-preview-section h3 {
    color: var(--primary-green);
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    text-align: center;
}

.btn-preview-group {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
    margin-bottom: 2rem;
}

.btn-group-label {
    width: 100%;
    text-align: center;
    color: var(--wood-brown);
    font-size: 0.9rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    margin-top: 1rem;
}

/* Wood Frame Mirror for Result Image */
.wood-frame-mirror {
    border: 12px solid var(--wood-brown);
    border-radius: 24px;
    box-shadow: 
        inset 0 0 0 3px var(--gold),
        inset 0 0 0 6px var(--primary-green),
        0 6px 20px rgba(0, 0, 0, 0.2),
        0 3px 8px rgba(0, 0, 0, 0.15);
    position: relative;
    background: white;
}

.wood-frame-mirror::before {
    content: '';
    position: absolute;
    top: -12px;
    left: -12px;
    right: -12px;
    bottom: -12px;
    border-radius: 24px;
    border: 3px solid var(--primary-green);
    pointer-events: none;
}

.wood-frame-mirror::after {
    content: '';
    position: absolute;
    top: -15px;
    left: -15px;
    right: -15px;
    bottom: -15px;
    border-radius: 26px;
    box-shadow: 0 0 0 1px var(--wood-brown);
    pointer-events: none;
}

/* ============================================
   MOBILE RESPONSIVE
   ============================================ */

@media (max-width: 768px) {
    h1 {
        font-size: 3rem !important;
    }
    
    .text-2xl {
        font-size: 1.1rem !important;
    }
    
    #creditsDisplay {
        padding: 1rem !important;
    }
    
    .btn-preview-group {
        gap: 8px;
    }
    
    .btn-preview-section {
        padding: 1.5rem 1rem;
    }
    
    .btn-preview-section h3 {
        font-size: 1.25rem;
    }
    
    .empty-guide {
        padding: 1.5rem 1rem;
    }
    
    .step-arrow {
        display: none;
    }
    
    .upload-cta-btn {
        max-width: 100%;
        font-size: 1rem;
    }
    
    /* Mobile: Stack buttons vertically */
    .btn-group-center {
        flex-direction: column;
        width: 100%;
        max-width: 360px;
    }
    
    .btn-group-center .btn {
        width: 100%;
    }
}

/* ============================================
   STATE-BASED BUTTON LAYOUT
   ============================================ */

/* State-based button group layout */
.btn-group-center {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 12px;
    flex-wrap: wrap;
    margin: 0 auto;
}

/* Toast animations */
@keyframes slideInRight {
    from {
        opacity: 0;
        transform: translateX(100%);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes slideOutRight {
    from {
        opacity: 1;
        transform: translateX(0);
    }
    to {
        opacity: 0;
        transform: translateX(100%);
    }
}
